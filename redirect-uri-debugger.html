<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Comprehensive BPO & BPaaS solutions including contact center services, IT support, and AI-driven automation for businesses in South Africa.">
    <title>Redirect URI Debugger</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="images/iBridge_Logo-removebg-preview.png" type="image/png">
    <link rel="apple-touch-icon" href="images/iBridge_Logo-removebg-preview.png">
    
    <!-- CSS Links -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/style-enhancements.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/animations.css">
</head>
<body>
    <h1>Azure AD Redirect URI Debugger</h1>
    
    <div class="info">
        <p>This tool will help you diagnose redirect URI issues with your Azure AD application.</p>
        <p>Application ID: <code>6686c610-81cf-4ed7-8241-a91a20f01b06</code></p>
    </div>

    <h2>Current Location Information</h2>
    <p>Here is your current browser location information:</p>
    <pre id="locationInfo">Loading...</pre>

    <h2>Required Redirect URI</h2>
    <p>Based on your current location, you need the following redirect URI in your Azure AD app:</p>
    <pre id="requiredUri">Loading...</pre>
    
    <h2>Steps to Fix</h2>
    <ol>
        <li>Copy the exact URI above</li>
        <li>Go to <a href="https://portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/ApplicationMenuBlade/Overview/appId/6686c610-81cf-4ed7-8241-a91a20f01b06" target="_blank" rel="noopener">Azure Portal App Registration</a></li>
        <li>Click on "Authentication" in the left sidebar</li>
        <li>Under "Platform configurations", click on "Add a platform" if none exists, or edit the "Web" platform</li>
        <li>Add the exact URI shown above to the "Redirect URIs" section</li>
        <li>Click "Configure" or "Save"</li>
        <li>Wait ~5 minutes for changes to propagate</li>
        <li>Try signing in again</li>
    </ol>

    <h2>Test Your Configuration</h2>
    <p>After adding the redirect URI, click the button below to test the sign-in:</p>
    <button id="testLoginBtn">Test Sign-In Flow</button>

    <script>
        // Display current location information
        const locationEl = document.getElementById('locationInfo');
        const requiredUriEl = document.getElementById('requiredUri');
        const testLoginBtn = document.getElementById('testLoginBtn');

        // Get detailed location information
        const locationInfo = {
            href: window.location.href,
            origin: window.location.origin,
            protocol: window.location.protocol,
            host: window.location.host,
            hostname: window.location.hostname,
            port: window.location.port,
            pathname: window.location.pathname,
            search: window.location.search,
            hash: window.location.hash
        };

        locationEl.textContent = JSON.stringify(locationInfo, null, 2);

        // Determine the required redirect URI
        const currentUrl = window.location.href;
        let redirectUri;

        // Check if we're on GitHub Pages
        if (window.location.hostname.includes('github.io')) {
            redirectUri = "https://ibridgesolutions.github.io/iBridge/intranet/login.html";
        } else {
            // Local development or other environment
            redirectUri = window.location.origin + "/intranet/login.html";
        }

        requiredUriEl.textContent = redirectUri;
        requiredUriEl.classList.add('important');

        // Add event listener to the test button
        testLoginBtn.addEventListener('click', function() {
            window.location.href = '../intranet/login.html';
        });
    </script>
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <div class="footer-logo">
                        <img src="images/iBridge_Logo-removebg-preview.png" alt="iBridge Logo" width="150" height="50">
                    </div>
                    <p>Leading provider of contact center solutions and business process outsourcing services in South Africa.</p>
                    <div class="social-links">
                        <a href="#" class="social-link" aria-label="Follow us on Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-link" aria-label="Follow us on Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-link" aria-label="Follow us on LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#" class="social-link" aria-label="Follow us on Instagram"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>

                <div class="footer-col">
                    <h4>Quick Links</h4>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="services.html">Services</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h4>Our Services</h4>
                    <ul class="footer-links">
                        <li><a href="contact-center.html">Contact Center Solutions</a></li>
                        <li><a href="it-support.html">IT Support & Cloud Services</a></li>
                        <li><a href="ai-automation.html">AI & Automation</a></li>
                        <li><a href="client-interaction.html">Client Interaction</a></li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h4>Contact Info</h4>
                    <ul class="footer-contact">
                        <li>
                            <i class="fas fa-map-marker-alt"></i>
                            332 Kent Ave, Ferndale, Randburg, 2194
                        </li>
                        <li>
                            <i class="fas fa-phone"></i>
                            <a href="tel:+27112387090">011 238 7090</a>
                        </li>
                        <li>
                            <i class="fas fa-envelope"></i>
                            <a href="mailto:info@ibridge.co.za">info@ibridge.co.za</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; <span id="currentYear"></span> <span class="primary">iBridge</span> Contact Solutions. All rights reserved.</p>
                <ul class="footer-legal">
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms of Service</a></li>
                    <li><a href="#">Cookie Policy</a></li>
                </ul>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/components.js"></script>
    <script src="js/theme.js"></script>
    <script src="js/animations.js"></script>
</body>
</html>

